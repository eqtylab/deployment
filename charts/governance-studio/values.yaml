# =============================================================================
# GOVERNANCE STUDIO - HELM VALUES CONFIGURATION
# =============================================================================
# This values file configures the Governance Studio frontend application.
#
# When deployed via the umbrella chart (governance-platform), most values
# are auto-configured from global settings.
# =============================================================================

# -- Enable Service
# @default -- `true`
# Enable the Governance Studio frontend application
enabled: true

# -- Replica Count
# @default -- `1`
# Number of pod replicas to run (ignored if autoscaling.enabled is true)
replicaCount: 1

# -- Image Configuration
# @default -- See values below
# Container image settings for Governance Studio
image:
  # -- Image Repository
  # @default -- `ghcr.io/eqtylab/governance-studio`
  repository: ghcr.io/eqtylab/governance-studio
  # -- Image Pull Policy
  # @default -- `IfNotPresent`
  # Options: IfNotPresent, Always, Never
  pullPolicy: IfNotPresent
  # -- Image Tag
  # @default -- `""` (uses chart appVersion)
  tag: ""

# -- Image Pull Secrets
# @default -- `[]` (auto-configured from global.secrets.imageRegistry.secretName)
# Additional secrets for pulling images from private registries
imagePullSecrets: []

# -- Name Override
# @default -- `""`
# Override the chart name used for resource naming
nameOverride: ""

# -- Full Name Override
# @default -- `""`
# Override the full name used for resource naming
fullnameOverride: ""

# -- Service Account Configuration
# @default -- See values below
serviceAccount:
  # -- Create Service Account
  # @default -- `false`
  create: false
  # -- Automount API Credentials
  # @default -- `true`
  automount: true
  # -- Service Account Annotations
  # @default -- `{}`
  annotations: {}
  # -- Service Account Name
  # @default -- `""` (generated if create is true)
  name: ""

# -- Pod Annotations
# @default -- `{}`
# Additional annotations to add to pods
podAnnotations: {}

# -- Pod Labels
# @default -- `{}`
# Additional labels to add to pods
podLabels: {}

# -- Pod Security Context
# @default -- `{}`
# Security context applied at the pod level
podSecurityContext: {}
  # fsGroup: 2000

# -- Container Security Context
# @default -- `{}`
# Security context applied at the container level
securityContext: {}
  # capabilities:
  #   drop:
  #     - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

# -- Service Configuration
# @default -- See values below
service:
  # -- Enable Service
  # @default -- `true`
  enabled: true
  # -- Service Type
  # @default -- `ClusterIP`
  # Options: ClusterIP, NodePort, LoadBalancer
  type: ClusterIP
  # -- Service Port
  # @default -- `80`
  port: 80

# -- Ingress Configuration
# @default -- See values below
ingress:
  # -- Enable Ingress
  # @default -- `false`
  enabled: false
  # -- Ingress Class Name
  # @default -- `""`
  # Example: "nginx", "traefik"
  className: ""
  # -- Ingress Annotations
  # @default -- `{}`
  annotations: {}
    # cert-manager.io/issuer: "letsencrypt-prod"
    # nginx.ingress.kubernetes.io/proxy-body-size: "64m"
  # -- Ingress Hosts
  # @default -- See values below
  hosts:
    - host: governance.example.com
      paths:
        - path: /
          pathType: Prefix
  # -- TLS Configuration
  # @default -- `[]`
  tls: []
    # - secretName: governance-studio-tls
    #   hosts:
    #     - governance.example.com

# -- Resource Configuration
# @default -- `{}`
# CPU and memory resource requests and limits
resources: {}
  # requests:
  #   cpu: 50m
  #   memory: 128Mi
  # limits:
  #   cpu: 200m
  #   memory: 256Mi

# -- Autoscaling Configuration
# @default -- See values below
autoscaling:
  # -- Enable Autoscaling
  # @default -- `false`
  enabled: false
  # -- Minimum Replicas
  # @default -- `1`
  minReplicas: 1
  # -- Maximum Replicas
  # @default -- `100`
  maxReplicas: 100
  # -- Target CPU Utilization
  # @default -- `80`
  targetCPUUtilizationPercentage: 80
  # -- Target Memory Utilization
  # @default -- `80`
  targetMemoryUtilizationPercentage: 80

# -- Pod Disruption Budget
# @default -- See values below
podDisruptionBudget:
  # -- Enable PDB
  # @default -- `false`
  enabled: false
  # -- Minimum Available
  # @default -- `1`
  # Only rendered when replicaCount > 1
  minAvailable: 1
  # -- Maximum Unavailable
  # @default -- `1`
  # Only rendered when replicaCount <= 1; allows eviction of single-replica pods during node drains
  # Setting this to `0` may block node drains and cluster upgrades
  maxUnavailable: 1

# -- Node Selector
# @default -- `{}`
# Node labels for pod assignment
nodeSelector: {}

# -- Tolerations
# @default -- `[]`
# Tolerations for pod assignment
tolerations: []

# -- Affinity
# @default -- `{}`
# Affinity rules for pod assignment
affinity: {}

# -- Startup Probe
# @default -- See values below
startupProbe:
  httpGet:
    path: /
    port: http
  failureThreshold: 30
  periodSeconds: 10

# -- Liveness Probe
# @default -- See values below
livenessProbe:
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 10
  periodSeconds: 10
  failureThreshold: 3

# -- Readiness Probe
# @default -- See values below
readinessProbe:
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 5
  periodSeconds: 5
  failureThreshold: 2

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
config:
  # -- Base Path
  # @default -- `/`
  # Base path where the UI is served (useful behind a reverse proxy)
  basePath: /

  # ---------------------------------------------------------------------------
  # Backend Service URLs
  # ---------------------------------------------------------------------------

  # -- API URL
  # @default -- `""` (auto-generated: "https://{global.domain}/governanceService")
  # Base API URL for the governance service
  apiUrl: ""

  # -- Auth Service URL
  # @default -- `""` (auto-generated: "https://{global.domain}/authService")
  authServiceUrl: ""

  # -- Integrity Service URL
  # @default -- `""` (auto-generated: "https://{global.domain}/integrityService")
  integrityServiceUrl: ""

  # -- Garage Service URL
  # @default -- `""` (auto-generated: "https://{global.domain}/garage" when enabled)
  garageServiceUrl: ""

  # ---------------------------------------------------------------------------
  # Authentication Provider Configuration
  # ---------------------------------------------------------------------------

  # -- Auth Provider
  # @default -- `""` (auto-configured from global.secrets.auth.provider)
  # Authentication provider type
  # Options: auth0, keycloak
  authProvider: ""

  # -- Auth0 Domain
  # @default -- `""`
  # **REQUIRED for Auth0**: Tenant domain (e.g., "your-tenant.us.auth0.com")
  # Only used when authProvider is "auth0"
  auth0Domain: ""

  # -- Auth0 Client ID
  # @default -- `""`
  # **REQUIRED for Auth0**: SPA client ID (public, not a secret)
  # Only used when authProvider is "auth0"
  auth0ClientId: ""

  # -- Auth0 Audience
  # @default -- `""`
  # **REQUIRED for Auth0**: API audience (e.g., "https://your-tenant.us.auth0.com/api/v2/")
  # Only used when authProvider is "auth0"
  auth0Audience: ""

  # -- Keycloak URL
  # @default -- `""`
  # **REQUIRED for Keycloak**: Server URL (e.g., "https://keycloak.example.com")
  # Only used when authProvider is "keycloak"
  keycloakUrl: ""

  # -- Keycloak Client ID
  # @default -- `""`
  # **REQUIRED for Keycloak**: SPA client ID (public, e.g., "governance-platform-frontend")
  # Only used when authProvider is "keycloak"
  keycloakClientId: ""

  # -- Keycloak Realm
  # @default -- `""`
  # **REQUIRED for Keycloak**: Realm name (e.g., "governance")
  # Only used when authProvider is "keycloak"
  keycloakRealm: ""

  # ---------------------------------------------------------------------------
  # Application Settings
  # ---------------------------------------------------------------------------

  # -- Environment
  # @default -- `""` (auto-configured from global.environmentType, defaults to "development")
  # Environment label
  environment: ""

  # -- App Title
  # @default -- `Governance Studio`
  # Application title displayed in browser and UI
  appTitle: "Governance Studio"

  # ---------------------------------------------------------------------------
  # Feature Flags
  # ---------------------------------------------------------------------------

  # -- Feature Flags
  # @default -- See values below
  features:
    # -- Governance Features
    # @default -- `true`
    # Enable core governance features
    governance: true

    # -- Lineage Features
    # @default -- `true`
    # Enable lineage and integrity features (requires integrity-service)
    lineage: true

    # -- Guardian Enabled
    # @default -- `false`
    # Enable Guardian feature family (parent toggle)
    guardianEnabled: false

    # -- Guardian Garage
    # @default -- `false`
    # Enable Compliance Garage integration (requires garageServiceUrl)
    guardianGarage: false

    # -- Guardian Rulebooks
    # @default -- `false`
    # Enable Guardian rulebook experiences
    guardianRulebooks: false

    # -- Guardian OS Functions
    # @default -- `false`
    # Enable OS-oriented Guardian functions
    guardianOsFunctions: false

    # -- Guardian SDK Functions
    # @default -- `false`
    # Enable SDK-oriented Guardian functions
    guardianSdkFunctions: false

    # -- Agent Management
    # @default -- `false`
    # Enable agent management UI
    agentManagement: false
