# Default values for governance-studio.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Enable the Governance Studio frontend application
enabled: true

# -- Number of pod replicas to run (ignored if autoscaling.enabled is true)
replicaCount: 1

image:
  # -- Container image repository
  repository: ghcr.io/eqtylab/governance-studio
  # -- Image pull policy (IfNotPresent | Always | Never)
  pullPolicy: IfNotPresent
  # -- Image tag override (defaults to chart appVersion if empty)
  tag: ""

# -- Image pull secrets for private registries
# @default -- Populated from global.secrets.imageRegistry.secretName in templates
imagePullSecrets: []

# -- Override the chart name used for resource naming
nameOverride: ""
# -- Override the full name used for resource naming
fullnameOverride: ""

serviceAccount:
  # -- Create a ServiceAccount for the deployment
  create: false
  # -- Automatically mount a ServiceAccount's API credentials
  automount: true
  # -- Annotations to add to the ServiceAccount
  annotations: {}
  # -- Name of an existing ServiceAccount to use (generated if empty and create is true)
  name: ""

# -- Additional annotations to add to pods
podAnnotations: {}

# -- Additional labels to add to pods
podLabels: {}

# -- Security context applied at the pod level
podSecurityContext: {}
  # fsGroup: 2000

# -- Security context applied at the container level
securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  # -- Create a Kubernetes Service
  enabled: true
  # -- Service type (ClusterIP | NodePort | LoadBalancer)
  type: ClusterIP
  # -- Service port
  port: 80

ingress:
  # -- Create an Ingress resource for external access
  enabled: false
  # -- IngressClass name (e.g., "nginx", "traefik")
  className: ""
  # -- Additional annotations for the Ingress resource
  annotations: {}
    # cert-manager.io/issuer: "letsencrypt-prod"
    # nginx.ingress.kubernetes.io/proxy-body-size: "64m"
  # -- Ingress host configuration
  hosts:
    - host: governance.example.com
      paths:
        - path: /
          pathType: Prefix
  # -- TLS configuration
  tls: []
    # - secretName: governance-studio-tls
    #   hosts:
    #     - governance.example.com

# -- Resource requests and limits
resources: {}
  # requests:
  #   cpu: 50m
  #   memory: 128Mi
  # limits:
  #   cpu: 200m
  #   memory: 256Mi

# Horizontal Pod Autoscaler - automatically scales pods based on resource usage
autoscaling:
  # -- Enable Horizontal Pod Autoscaler
  enabled: false
  # -- Minimum number of replicas
  minReplicas: 1
  # -- Maximum number of replicas
  maxReplicas: 100
  # -- Target CPU utilization percentage
  targetCPUUtilizationPercentage: 80
  # -- Target memory utilization percentage
  targetMemoryUtilizationPercentage: 80

# Pod Disruption Budget - maintains availability during cluster disruptions
podDisruptionBudget:
  # -- Minimum available pods during disruptions (only applied when autoscaling is enabled or replicaCount > 1)
  minAvailable: 1

# -- Node labels for pod assignment
nodeSelector: {}

# -- Tolerations for pod assignment
tolerations: []

# -- Affinity rules for pod assignment
affinity: {}

# -- Startup probe configuration
startupProbe:
  httpGet:
    path: /
    port: http
  failureThreshold: 30
  periodSeconds: 10

# -- Liveness probe configuration
livenessProbe:
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 10
  periodSeconds: 10
  failureThreshold: 3

# -- Readiness probe configuration
readinessProbe:
  httpGet:
    path: /
    port: http
  initialDelaySeconds: 5
  periodSeconds: 5
  failureThreshold: 2

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

config:
  # -- Base path where the UI is served (useful behind a reverse proxy)
  basePath: /

  # Backend Service URLs
  # -- Base API URL for the governance service
  # @default -- Generated as "https://{global.domain}/governanceService" in templates
  apiUrl: ""
  # -- Auth service URL for authentication
  # @default -- Generated as "https://{global.domain}/authService" in templates
  authServiceUrl: ""
  # -- Integrity service URL for lineage and statements
  # @default -- Generated as "https://{global.domain}/integrityService" in templates
  integrityServiceUrl: ""
  # -- Garage service URL (optional compliance integration)
  # @default -- Generated as "https://{global.domain}/garage" in templates if enabled
  garageServiceUrl: ""

  # Authentication Provider Configuration
  # -- Authentication provider type (auth0 | keycloak)
  # @default -- Populated from global.secrets.auth.provider in templates
  authProvider: ""

  # Auth0 Configuration (only used when authProvider is "auth0")
  # -- Auth0 tenant domain
  # @default -- `""` (REQUIRED when authProvider is auth0)
  # Example: your-tenant.us.auth0.com
  auth0Domain: ""
  # -- Auth0 client ID (SPA application - public, not a secret)
  # @default -- `""` (REQUIRED when authProvider is auth0)
  auth0ClientId: ""
  # -- Auth0 API audience
  # @default -- `""` (REQUIRED when authProvider is auth0)
  # Example: https://your-tenant.us.auth0.com/api/v2/
  auth0Audience: ""

  # Keycloak Configuration (only used when authProvider is "keycloak")
  # -- Keycloak server URL
  # @default -- Populated from global.secrets.auth.keycloak.values.url in templates
  keycloakUrl: ""
  # -- Keycloak realm name
  # @default -- Populated from global.secrets.auth.keycloak.values.realm in templates
  keycloakRealm: ""
  # -- Keycloak client ID for frontend
  # @default -- Populated from global.secrets.auth.keycloak.values.frontendClientId in templates
  keycloakClientId: ""

  # Application Settings
  # -- Environment label (development | staging | production)
  # @default -- Populated from global.environmentType in templates
  environment: ""
  # -- Application title displayed in browser and UI
  appTitle: "Governance Studio"
  # -- Public hostname for generating links and redirects
  # @default -- Populated from global.domain in templates
  appHostname: ""

  # Feature Flags
  features:
    # -- Enable core governance features
    governance: true
    # -- Enable lineage and integrity features (requires integrity-service)
    lineage: true
    # -- Enable Guardian feature family (parent toggle)
    guardianEnabled: false
    # -- Enable Compliance Garage integration (requires garageServiceUrl)
    guardianGarage: false
    # -- Enable Guardian rulebook experiences
    guardianRulebooks: false
    # -- Enable OS-oriented Guardian functions
    guardianOsFunctions: false
    # -- Enable SDK-oriented Guardian functions
    guardianSdkFunctions: false
    # -- Enable agent management UI
    agentManagement: false

  # Branding Configuration
  branding:
    # -- URL or path to logo asset
    logoUrl: /vite.svg
    # -- Primary brand color (hex code)
    primaryColor: "#0f172a"
    # -- Company name for branding
    companyName: "EQTY Lab"
