{{- if and .Values.bootstrap.enabled .Values.output.createSecrets }}
---
# Frontend configuration secret
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.output.secrets.frontend }}
  labels:
    {{- include "keycloak-bootstrap.labels" . | nindent 4 }}
    app.kubernetes.io/component: frontend-config
type: Opaque
stringData:
  KEYCLOAK_URL: "{{ .Values.keycloak.url }}"
  KEYCLOAK_REALM: "{{ .Values.keycloak.realm.name }}"
  KEYCLOAK_CLIENT_ID: "{{ .Values.clients.frontend.clientId }}"

---
# Backend configuration secret
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.output.secrets.backend }}
  labels:
    {{- include "keycloak-bootstrap.labels" . | nindent 4 }}
    app.kubernetes.io/component: backend-config
type: Opaque
stringData:
  KEYCLOAK_URL: "{{ .Values.keycloak.url }}"
  KEYCLOAK_REALM: "{{ .Values.keycloak.realm.name }}"
  KEYCLOAK_CLIENT_ID: "{{ .Values.clients.backend.clientId }}"
  # Note: Client secret should be provided via existing secret

---
# Worker configuration secret
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.output.secrets.worker }}
  labels:
    {{- include "keycloak-bootstrap.labels" . | nindent 4 }}
    app.kubernetes.io/component: worker-config
type: Opaque
stringData:
  KEYCLOAK_URL: "{{ .Values.keycloak.url }}"
  KEYCLOAK_REALM: "{{ .Values.keycloak.realm.name }}"
  KEYCLOAK_CLIENT_ID: "{{ .Values.clients.worker.clientId }}"
  # Note: Client secret should be provided via existing secret
{{- end }}
