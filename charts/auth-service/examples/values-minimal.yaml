# Minimal Configuration (Quick Start)
# The absolute minimum configuration needed to get auth-service running
#
# Usage:
#   helm install auth-service ./charts/auth-service -f examples/values-minimal.yaml
#
# This example shows ONLY the values you MUST customize.
# All other values use sensible defaults from values.yaml
#
# Prerequisites:
#   1. PostgreSQL database accessible
#   2. Auth0 tenant with configured application
#   3. Required Kubernetes secrets created (see below)

# =============================================================================
# REQUIRED: Identity Provider
# =============================================================================

config:
  idp:
    provider: "auth0"
    auth0:
      # REQUIRED: Your Auth0 tenant domain
      domain: "YOUR-TENANT.auth0.com"
      # REQUIRED: Management API audience
      managementAudience: "https://YOUR-TENANT.auth0.com/api/v2/"
      # REQUIRED: Your API identifier
      apiIdentifier: "https://api.your-app.com"

  # REQUIRED: Key vault for DID signing
  keyVault:
    provider: "azure"
    azure:
      vaultUrl: "https://YOUR-KEYVAULT.vault.azure.net/"
      tenantId: "YOUR-AZURE-TENANT-ID"

# =============================================================================
# REQUIRED: Database
# =============================================================================

externalDatabase:
  host: "YOUR-DATABASE-HOST"
  port: 5432
  name: "governance"
  user: "postgres"
  sslMode: "require"

  passwordSecretKeyRef:
    name: "database-credentials"
    key: "password"

# =============================================================================
# REQUIRED: Secrets
# =============================================================================
#
# Create these secrets before installing:
#
# kubectl create secret generic database-credentials \
#   --from-literal=password=YOUR_DB_PASSWORD
#
# kubectl create secret generic auth0-credentials \
#   --from-literal=client-id=YOUR_CLIENT_ID \
#   --from-literal=client-secret=YOUR_CLIENT_SECRET \
#   --from-literal=mgmt-client-id=YOUR_MGMT_CLIENT_ID \
#   --from-literal=mgmt-client-secret=YOUR_MGMT_CLIENT_SECRET
#
# kubectl create secret generic auth-service-secrets \
#   --from-literal=api-secret=$(openssl rand -base64 32) \
#   --from-literal=jwt-secret=$(openssl rand -base64 32) \
#
# kubectl create secret generic azure-keyvault-credentials \
#   --from-literal=client-id=YOUR_AZURE_CLIENT_ID \
#   --from-literal=client-secret=YOUR_AZURE_CLIENT_SECRET

secrets:
  # Auth0 credentials
  auth:
    auth0:
      name: "auth0-credentials"

  # Auth service credentials
  authService:
    name: "auth-service-secrets"

  # Secret manager credentials
  secretManager:
    azure_key_vault:
      name: "azure-keyvault-credentials"
# =============================================================================
# OPTIONAL: Enable ingress for external access
# =============================================================================

# ingress:
#   enabled: true
#   className: "nginx"
#   hosts:
#     - host: auth.your-domain.com
#       paths:
#         - path: "/authService(/|$)(.*)"
#           pathType: ImplementationSpecific
#   tls:
#     - secretName: auth-tls
#       hosts:
#         - auth.your-domain.com
