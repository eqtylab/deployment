{{- if and .Values.global.secrets.createSecrets (eq (index .Values "auth-service").config.idp.provider "keycloak") }}
apiVersion: v1
kind: Secret
metadata:
  name: auth-service-keycloak-credentials
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "governance-studio.labels" . | nindent 4 }}
    app.kubernetes.io/component: auth-service
    app.kubernetes.io/part-of: keycloak-integration
type: Opaque
data:
  # Frontend client configuration (public client)
  frontend-client-id: {{ .Values.global.secrets.values.keycloak.frontendClientId | default "governance-platform-frontend" | b64enc | quote }}
  frontend-client-secret: {{ "" | b64enc | quote }} # Public client, no secret

  # Backend client configuration (confidential client)
  backend-client-id: {{ .Values.global.secrets.values.keycloak.backendClientId | default "governance-platform-backend" | b64enc | quote }}
  backend-client-secret: {{ required "Keycloak backend client secret is required" .Values.global.secrets.values.keycloak.backendClientSecret | b64enc | quote }}
{{- end }}
