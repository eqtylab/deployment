# =============================================================================
# GOVERNANCE PLATFORM - MINIMAL CONFIGURATION (Quick Start)
# =============================================================================
# The absolute minimum configuration needed to get the platform running.
# This example shows ONLY the values you MUST customize.
#
# PREREQUISITES:
#   1. Kubernetes cluster with ingress controller
#   2. Auth0 or Keycloak tenant configured
#   3. Storage provider (AWS S3, Azure Blob, or GCS)
#   4. Azure Key Vault for credential signing
#   5. Required Kubernetes secrets created (see bottom of file)
#
# USAGE:
#   1. Create secrets before deploying (see SECRET CREATION section below)
#   2. Deploy:
#      helm dependency update ./charts/governance-platform
#      helm install governance-platform ./charts/governance-platform \
#        --namespace governance \
#        --create-namespace \
#        --values values-minimal.yaml
# =============================================================================

# =============================================================================
# REQUIRED: Global Configuration
# =============================================================================
global:
  # REQUIRED: Your domain for ingress
  domain: "governance.your-domain.com"

  # Environment type
  environmentType: "production"

  # Secrets must be pre-created (see below)
  secrets:
    create: false

    # Authentication provider
    auth:
      provider: "auth0" # Options: "auth0", "keycloak"

# =============================================================================
# REQUIRED: Storage Provider Configuration
# =============================================================================
# Choose ONE storage provider and configure it

governance-service:
  enabled: true
  config:
    # REQUIRED: Choose storage provider
    storageProvider: "aws_s3" # Options: "aws_s3", "azure_blob", "gcs"

    # For AWS S3:
    awsS3Region: "us-east-1"
    awsS3BucketName: "YOUR-BUCKET-NAME"

    # For Azure Blob:
    # storageProvider: "azure_blob"
    # azureStorageContainerName: "YOUR-CONTAINER-NAME"

    # For GCS:
    # storageProvider: "gcs"
    # gcsBucketName: "YOUR-BUCKET-NAME"

integrity-service:
  enabled: true
  env:
    # REQUIRED: Choose storage (GCS not supported for integrity-service)
    integrityAppBlobStoreType: "aws_s3" # Options: "aws_s3", "azure_blob"

    # For AWS S3:
    integrityAppBlobStoreRegion: "us-east-1"
    integrityAppBlobStoreBucket: "YOUR-BUCKET-NAME"

    # For Azure Blob:
    # integrityAppBlobStoreType: "azure_blob"
    # integrityAppBlobStoreContainer: "YOUR-CONTAINER-NAME"

# =============================================================================
# REQUIRED: Auth0 Configuration (if using Auth0)
# =============================================================================
auth-service:
  enabled: true
  config:
    idp:
      provider: "auth0"
      auth0:
        # REQUIRED: Auth0 tenant domain
        domain: "YOUR-TENANT.auth0.com"
        # REQUIRED: API identifier
        apiIdentifier: "https://YOUR-TENANT.auth0.com/api/v2/"
        # REQUIRED: Management API audience
        managementAudience: "https://YOUR-TENANT.auth0.com/api/v2/"

governance-studio:
  enabled: true
  config:
    # REQUIRED: Auth0 configuration for frontend (SPA - public, not secrets)
    auth0Domain: "YOUR-TENANT.auth0.com"
    auth0ClientId: "YOUR-SPA-CLIENT-ID"
    auth0Audience: "https://YOUR-TENANT.auth0.com/api/v2/"

# =============================================================================
# PostgreSQL (included by default)
# =============================================================================
postgresql:
  enabled: true
# =============================================================================
# SECRET CREATION COMMANDS
# =============================================================================
# Run these commands before deploying:
#
# # Create namespace
# kubectl create namespace governance
#
# # Database credentials
# kubectl create secret generic platform-database \
#   --from-literal=username=postgres \
#   --from-literal=password="$(openssl rand -base64 24)" \
#   --namespace governance
#
# # Auth0 credentials
# kubectl create secret generic platform-auth0 \
#   --from-literal=client-id=YOUR_AUTH0_CLIENT_ID \
#   --from-literal=client-secret=YOUR_AUTH0_CLIENT_SECRET \
#   --from-literal=mgmt-client-id=YOUR_MGMT_CLIENT_ID \
#   --from-literal=mgmt-client-secret=YOUR_MGMT_CLIENT_SECRET \
#   --namespace governance
#
# # For AWS S3:
# kubectl create secret generic platform-aws-s3 \
#   --from-literal=access-key-id=YOUR_ACCESS_KEY \
#   --from-literal=secret-access-key=YOUR_SECRET_KEY \
#   --namespace governance
#
# # For Azure Blob:
# kubectl create secret generic platform-azure-blob \
#   --from-literal=account-name=YOUR_ACCOUNT \
#   --from-literal=account-key=YOUR_KEY \
#   --from-literal=connection-string=YOUR_CONNECTION_STRING \
#   --namespace governance
#
# # Azure Key Vault (required for signing)
# kubectl create secret generic platform-azure-key-vault \
#   --from-literal=client-id=YOUR_CLIENT_ID \
#   --from-literal=client-secret=YOUR_CLIENT_SECRET \
#   --from-literal=tenant-id=YOUR_TENANT_ID \
#   --from-literal=vault-url=https://YOUR-VAULT.vault.azure.net/ \
#   --namespace governance
#
# # Encryption key
# kubectl create secret generic platform-encryption-key \
#   --from-literal=encryption-key="$(openssl rand -base64 32)" \
#   --namespace governance
#
# # Governance worker credentials
# kubectl create secret generic platform-governance-worker \
#   --from-literal=encryption-key="$(openssl rand -base64 32)" \
#   --from-literal=client-id=YOUR_M2M_CLIENT_ID \
#   --from-literal=client-secret=YOUR_M2M_CLIENT_SECRET \
#   --namespace governance
#
# # Image pull secret
# kubectl create secret docker-registry platform-image-pull-secret \
#   --docker-server=ghcr.io \
#   --docker-username=YOUR_GITHUB_USERNAME \
#   --docker-password=YOUR_GITHUB_PAT \
#   --docker-email=YOUR_EMAIL \
#   --namespace governance
